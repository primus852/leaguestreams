String.prototype.escapeHTML=function(){return(this.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"))};$(document).ready(function(){$(".card-image").mouseover(function(){$(".card-modal").fadeIn(100).toggleClass("active")}).mouseout(function(){$(".card-modal").fadeOut(100).toggleClass("active")})});var player;var cols={},messageIsOpen=false;$(function(){introInit();initScrollbar("#perfectScroll");initScrollbar("#pScrollerMenu");initScrollbar("#pScrollerMain");initScrollbar("#lScroll");$(window).hashchange(function(){var g=location.hash.replace(/^#/,"");if(g===""){$(".trigger-message-close").trigger("click")}});var e=$("#"+LS_NAV);if(!e.is(":visible")){e.parent().prev("a").trigger("click")}e.addClass("active");if($("#modal-5").length){modalInit()}var a=$("#lScroll .lazy");if(a.length){a.Lazy({appendScroll:$("#lScroll")})}var b=$("select");if(b.length){b.select2({width:"100%",allowClear:true})}var c=$("[data-step]");if(c.length){$(document).on("click","#hiw",function(g){introJs().setOption("showProgress",true).start()})}else{$("#mTutorial").remove()}initOverlays();detectHash();var d=$("#stats-table");if(d.length){d.DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:true,columnDefs:[{orderData:[2],targets:[3]},{targets:[2],visible:false,searchable:false}]});d.on("page.dt",function(){initTooltips(".tt")});initTooltips(".tt")}var f=$("#champ-table");if(f.length){f.DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:true})}initTooltips(".tt")});var $isPlayer=$(".refreshInGamePlayer");if($isPlayer.length){setInterval(function(){checkRunesInGame($isPlayer,false,true)},10*1000);var $playerWindow=$("#playerMain");$playerWindow.height($(window).height()-65);var $videoHeight=$playerWindow.height();var $videoWidth=$playerWindow.width();var options={width:$videoWidth,height:$videoHeight,channel:$("#streamer-channel").val(),playsinline:true};if($isPlayer.hasClass("twitch-embed")){player=new Twitch.Embed("playerMain",options)}else{player=new Twitch.Player("playerMain",options)}player.setVolume(0.5);checkRunesInGame($isPlayer,false,true)}$(document).on("click",".refreshRunes",function(a){checkRunesInGame($isPlayer,false,true)});$(document).on("click",".refreshInGamePlayer",function(a){a.preventDefault();checkRunesInGame($(this),true,true)});$(document).on("click",".toggle-chat",function(){var a=$(this);if(a.hasClass("clicked")){return false}a.addClass("clicked").html('<i class="fa fa-spin fa-spinner"></i>')});function checkRunesInGame(d,a,g){var f=d;var e=$("#ajax-route-load-perks").val();var c=$(".r-foot-check");var b=$(".footNavUL");if(f.hasClass("disabled")){return false}if(g===true||!f.hasClass("inGame")){if(a===true){f.html('<i class="fa fa-spin fa-refresh"></i> Refreshing...').addClass("disabled").css("background","#2d2d2d")}$.post(e).done(function(h){b.html(h);var i=$(h).find("#ls-champion");if(i.length){f.html('<i class="fa fa-info-circle"></i> Playing '+i.html()+" - Check Runes").removeClass("disabled").addClass("inGame").css("background","#82b84f");initTooltips(".tt")}else{f.html('<i class="fa fa-refresh"></i> Not in Game').removeClass("disabled").css("background","#a01c1a").removeClass("inGame");if(c.is(":checked")){$(".closeBar").trigger("click")}}if(!c.is(":checked")&&a===true&&f.hasClass("inGame")){c.trigger("click");f.hide()}}).fail(function(){f.html("Error").removeClass("disabled").css("background","#a01c1a")})}}var $isPlayerVod=$(".refreshInGamePlayerVod");if($isPlayerVod.length){checkRunesInGameVod($isPlayerVod,true,true)}$(document).on("click",".refreshRunes",function(a){checkRunesInGameVod($isPlayerVod,false,true)});$(document).on("click",".closeBar",function(a){$(".r-foot-check").trigger("click");if($isPlayer.length){$isPlayer.show()}if($isPlayerVod.length){$isPlayerVod.show()}});$(document).on("click",".refreshInGamePlayerVod",function(a){a.preventDefault();checkRunesInGameVod($(this),true,true)});function checkRunesInGameVod(b,c,e){var j=b;var i=$("#ajax-route-load-perks-vod").val();var a=$(".r-foot-check");var f=$(".footNavUL");var g=j.attr("data-match");if(j.hasClass("disabled")){return false}var d=$("#tFrame").contents().find("#video-playback");var h=d.find(".player-seek__time");console.log(h);if(e===true||!j.hasClass("inGame")){if(c===true){j.html('<i class="fa fa-spin fa-refresh"></i> Refreshing...').addClass("disabled").css("background","#2d2d2d")}$.get(i,{match:g}).done(function(k){f.html(k);var l=$(k).find("#ls-champion");if(l.length){j.html('<i class="fa fa-info-circle"></i> Playing '+l.html()+" - Check Runes").removeClass("disabled").addClass("inGame").css("background","#82b84f");initTooltips(".tt")}else{j.html('<i class="fa fa-refresh"></i> Not in Game').removeClass("disabled").css("background","#a01c1a").removeClass("inGame");if(a.is(":checked")){$(".closeBar").trigger("click")}}if(!a.is(":checked")&&c===true&&j.hasClass("inGame")){a.trigger("click");j.hide()}}).fail(function(){j.html("Error").removeClass("disabled").css("background","#a01c1a")})}}$(document).on("click",".md-trigger",function(){var e=$(this);var a=null;var d=null;var c=null;var b=null;if(e.hasClass("removeStreamer")){a=e.attr("data-streamer");b=e.attr("data-channel");$(".channelName").html(b);$("#streamerRemove").attr("data-streamer",a)}if(e.hasClass("removeSummoner")){d=e.attr("data-summoner");c=e.attr("data-name");a=e.attr("data-streamer");$(".summonerName").html(c);$("#summonerRemove").attr("data-summoner",d).attr("data-streamer",a)}if(e.hasClass("reportStreamer")){a=e.attr("data-streamer");b=e.attr("data-channel");$(".channelName").html(b);$("#streamerReport").attr("data-streamer",a)}if(e.hasClass("reportSummoner")){d=e.attr("data-summoner");c=e.attr("data-name");a=e.attr("data-streamer");$(".summonerName").html(c);$("#summonerReport").attr("data-summoner",d).attr("data-streamer",a)}});$(document).on("click",".md-close",function(b){var a=$(this);a.parent().parent().parent().removeClass("md-show")});$(document).on("click","#streamerRemove",function(d){var c=$(this);var b=$("#ajax-route-delete-streamer").val();var a=c.attr("data-streamer");$.post(b,{streamer:a}).done(function(e){openNoty(e.result,e.message);if(e.result==="success"){$("#sRow_"+a).remove()}}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})});$(document).on("click","#summonerRemove",function(d){var c=$(this);var b=$("#ajax-route-delete-summoner").val();var a=c.attr("data-summoner");$.post(b,{summoner:a}).done(function(e){openNoty(e.result,e.message);if(e.result==="success"){$("#sDiv_"+a).remove()}}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})});$(document).on("click","#streamerReport",function(f){var d=$(this);var c=$("#ajax-route-report-streamer").val();var b=d.attr("data-streamer");var a=$("#reportDetails").val();if(!a.length){openNoty("warning","Please give a reason for the report.");return false}$.post(c,{streamer:b,reason:a}).done(function(e){openNoty(e.result,e.message)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})});$(document).on("click","#summonerReport",function(f){var d=$(this);var c=$("#ajax-route-report-summoner").val();var b=d.attr("data-summoner");var a=$("#reportDetails").val();if(!a.length){openNoty("warning","Please give a reason for the report.");return false}$.post(c,{summoner:b,reason:a}).done(function(e){openNoty(e.result,e.message)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})});$(document).on("mouseenter",".refreshStreamer",function(){var a=$(this);a.addClass("fa-spin")});$(document).on("mouseleave",".refreshStreamer",function(){var a=$(this);a.removeClass("fa-spin")});$(document).on("click",".refreshStreamer",function(i){var m=$(this);var b=m.attr("data-summoners");var g=m.attr("data-streamer");var d=$("#logo").attr("src");var j=$("#sRow_"+g);var n=$("#sPanel_"+g);var l=$("#ajax-route-update-streamer-single").val();var k=m.attr("data-streamer-container");var h=b.split(",");var c=0;var f="";var a=[];$.each(h,function(o,e){var p=e.split("___");var s=p[0];var r=p[1];f=f+'<span id="s_'+r+'" class="text-white">'+s+': <i class="fa fa-spin fa-spinner"></i></span> | ';var q=$.post(l,{id:r}).done(function(t){if(t.extra.action==="remove"){openNoty(t.result,t.message);j.remove();$.each(a,function(v,u){u.abort()});return false}if(t.extra.action==="found"){$.each(a,function(v,u){u.abort()});$.post(k,{id:r}).done(function(u){j.replaceWith(u);initTooltips(".tt");n.unblock()}).fail(function(){n.unblock()});return false}c++;$("#s_"+r).removeClass("text-white").addClass("text-"+t.extra.iClass).html(s+': <i class="fa fa-'+t.extra.icon+'"></i>');if(c===h.length){$.post(k,{id:r}).done(function(u){j.replaceWith(u);initTooltips(".tt");n.unblock()}).fail(function(){n.unblock()})}}).fail(function(){n.unblock()});a.push(q)});n.block({message:'   <div class="row">       <div class="col col-12">           <div class="row">               <div class="col col-4 text-right">                   <img src="'+d+'" style="max-height:85px;">               </div>               <div class="col col-8 text-left">                   <h1 style="margin-top:25px;"><i class="fa fa-spin fa-spinner"></i> Updating Streamer</h1>               </div>           </div>       </div>   </div>   <br />   <div class="row">       <div class="col col-12">'+f+"       </div>   </div> ",css:{backgroundColor:"transparent",color:"#fff",border:"none",width:"100%"},width:"100%"})});$(document).on("click",".clickable",function(c){c.preventDefault();window.location.hash=$(this).attr("data-hash");var b=Math.floor((Math.random()*10000)+1);$("body").append('<div class="messageFly" id="'+b+'"></div>');var a=$("#"+b);a.show();loadDetails($(this),b);if(messageIsOpen){if(!$(this).hasClass("innerMessage")){cols.hideMessage()}setTimeout(function(){cols.showMessage()},300)}else{cols.showMessage()}cols.showOverlay()});$("#main .clickableLegacy").on("click",function(c){var a=$(this),b=$(c.target);if(b.is("label")){a.toggleClass("selected")}else{if(messageIsOpen&&a.is(".active")){cols.hideMessage();cols.hideOverlay()}else{if(messageIsOpen){cols.hideMessage();a.addClass("active");setTimeout(function(){cols.showMessage()},300)}else{a.addClass("active");cols.showMessage()}cols.showOverlay()}}});$("#main > .overlay").on("click",function(){cols.hideOverlay();cols.hideMessage();cols.hideSidebar()});$(".search-box input").on("focus",function(){if($(window).width()<=1360){cols.hideMessage()}});$("#preloader").fadeOut("slow",function(){$(this).remove()});function introInit(){var a=$(".cd-bg-video-wrapper");if(a.length){var b=window.getComputedStyle(document.querySelector(".cd-bg-video-wrapper"),"::after").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"");if(b==="desktop"){var d=a.data("video"),c=$('<video loop><source src="'+d+'.mp4" type="video/mp4" /><source src="'+d+'.webm" type="video/webm" /></video>');c.appendTo(a);c.get(0).play()}}}function modalInit(){[].slice.call($(".md-trigger")).forEach(function(c,b){var a=$("#"+c.getAttribute("data-modal"));c.addEventListener("click",function(d){a.addClass("md-show")})})}$(document).on("click",".manageSmurf",function(i){var h=$(this);var b=h.attr("data-type");var g=h.attr("data-smurf");var d=h.attr("data-streamer");var a=h.attr("data-region");var f=$("#ajax-route-manage-smurf").val();var c=h.html();if(h.hasClass("is-disabled")){return false}h.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i>');$.get(f,{type:b,smurf:g,streamer:d,region:a}).done(function(e){openNoty(e.result,e.message);if(e.result==="success"){$("#row_"+d).remove()}}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident");h.removeClass("is-disabled").html(c)})});$(document).on("click","#submitStreamer",function(d){var c=$(this);var a=$("#channel").val().trim();var f=$("#platform").val();var b=$("#ajax-route-check-streamer").val();if(c.hasClass("is-disabled")){return false}if(a===""){openNoty("error","Please enter a Channel-Name");return false}c.addClass("is-disabled").html("Checking...");$.post(b,{platform:f,channel:a}).done(function(e){openNoty(e.result,e.message);$("#channel").val("").focus();c.removeClass("is-disabled").html("Check")}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident");c.removeClass("is-disabled").html("Check")})});function addMasteries(f,b,e,d,g,h,a){var c=$("#masteries-"+d);if(b==="0"){c.append('<div class="mastery mRow'+g+" "+h+' mastery-none">\n    <div class="mContent tt" title="'+e+"<br /><span style='font-size:12px;'>"+a+'</span>">\n        <div class="icon iconsGrey icon-offset-'+f+' " data-name="'+e+'"></div>\n    </div>\n</div>')}else{c.append('<div class="mastery mRow'+g+" "+h+'">\n    <div class="mContent tt" title="'+e+"<br /><span style='font-size:12px;'>"+a+'</span>">\n        <div class="icon iconsActive icon-offset-'+f+' " data-name="'+e+'"></div>\n        <div class="rank">'+b+"</div>\n    </div>\n</div>")}}var $streamerAc=$("#streamerAC");if($streamerAc.length){var $urlAuto=$("#ajax-route-find-streamer-ac").val();$streamerAc.autocomplete({valueKey:"title",source:[{url:$urlAuto+"/%QUERY%",type:"remote"}],visibleLimit:10,autoselect:true,minLength:2}).on("selected.xdsoft",function(b,a){$("#streamerId").val(a.id)}).keyup(function(a){}).focus()}$(document).on("click",".clickRole",function(){var c=$(this);var a=c.attr("data-role-id");var b=$("#ajax-route-load-vods-role").val();if($("#role_"+a).is(":visible")){$("#role_"+a).slideToggle();return false}if(c.hasClass("is-diabled")){openNoty("warning","Loading VODs already");return false}$(".vodToggle").hide();$("#role_"+a).slideToggle("slow").html('&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-spin fa-spinner"></i>');c.addClass("is-disabled");$.get(b,{role:a}).done(function(d){c.removeClass("is-disabled");$("#role_"+a).html('<table class="table table-condensed" id="tbl_'+a+'">\n    <thead>\n    <th class="text-center"><i class="fa fa-comment-o"></i></th>\n    <th class="text-center"><i class="fa fa-calendar-o"></i></th>\n    <th class="text-center"><i class="fa fa-video-camera"></i></th>\n    <th class="text-center"><i class="fa fa-trophy"></i></th>\n    <th class="text-center"><i class="fa fa-location-arrow"></i></th>\n    <th class="text-center"><i class="fa fa-flash"></i> </th>\n    <th class="text-center"><i class="fa fa-eye"></i></th>\n    </thead>\n    <tbody>\n    </tbody>\n</table> ');$.each(d.vods.videos,function(f,e){var g="";if(e.enemyChampion!==null){g="vs. "+e.enemyChampion+""}$("#tbl_"+a+" > tbody").append('<tr>\n    <td><img src="/assets/vendor/ls/img/flags/'+e.lang+'.png" /></td>\n    <td>'+e.gameStart+"</td>\n    <td>"+e.channelUser+"</td>\n    <td>"+e.league+"</td>\n    <td>"+e.champion+"</td>\n    <td>"+g+'</td>\n    <td><a href="'+e.internalLink+'">WATCH</a></td>\n</tr>')});initScrollbar("#role_"+a)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident");c.removeClass("is-disabled")})});$(document).on("click",".clickChampion",function(){var d=$(this);var b=d.attr("data-champ-id");var c=$("#ajax-route-load-vods").val();var a=$("#champ_"+b);if(a.is(":visible")){a.slideToggle();return false}if(d.hasClass("is-diabled")){openNoty("warning","Loading VODs already");return false}$(".vodToggle").hide();a.slideToggle("slow").html('&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-spin fa-spinner"></i>');d.addClass("is-disabled");$.get(c,{c:b}).done(function(f){a.html(f);var e=$("#tableChampion");e.DataTable({responsive:true,dom:""});$(".tt").tooltipster({animation:"fade",delay:200,theme:["tooltipster-punk","tooltipster-ls"],contentAsHTML:true})}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident");d.removeClass("is-disabled")})});$(document).on("click",".clickChampionStreamer",function(){var b=$(this);var a=b.attr("data-champion");if($("#champ_"+a).is(":visible")){$("#champ_"+a).slideToggle();return false}if(b.hasClass("is-diabled")){openNoty("warning","Loading VODs already");return false}$("#champ_"+a).slideToggle("slow").html('<h4><i class="fa fa-spin fa-spinner"></i> Loading Streamers</h4>\n<div class="row" style="border-bottom:1px solid #ccc;padding-top:5px;">\n    <div class="col-12">\n        This may take a while...\n    </div>\n</div>');b.addClass("is-disabled");initMainStreamer("#champ_"+a)});$(document).on("keyup","#searchChamp",function(){var a=$(this);var b=a.val().toLowerCase();if(b!==""){$(".champRow").hide();$('[data-champ*="'+b+'"]').show();$('[data-streamer*="'+b+'"]').show();$('[data-summoner*="'+b+'"]').show()}else{$(".champRow").show()}});$(document).on("keyup","#searchVod",function(){var a=$(this);var b=a.val().toLowerCase();if(b!==""){$(".vodCard").hide();$('[data-champ*="'+b+'"]').show();$('[data-role*="'+b+'"]').show()}else{$(".vodCard").show()}});$(document).on("click",".showWin",function(){var a=$(this);var b=a.attr("data-win");if(b==="1"){a.html('<i class="fa fa-check"></i>')}else{a.html('<i class="fa fa-remove"></i>')}});$(document).on("click","#wishVod",function(f){f.preventDefault();var i=$(this);var g=$("#ajax-route-load-vods-wish").val();var c=i.html();if(i.hasClass("is-disabled")){return false}i.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i> Loading');var h=$("#wChampion");var d=$("#wRole");var j=$("#wStreamer");var b=$("#wEnemy");var a=$("#vodRow");if(!h.val().length&&!d.val().length&&!j.val().length&&!b.val().length){i.removeClass("is-disabled").html(c);openNoty("error","Please select at least one criteria");return false}a.html('<i class="fa fa-spin fa-spinner"></i>');$.get(g,{champions:h.val(),roles:d.val(),streamers:j.val(),enemies:b.val()}).done(function(e){a.html(e);i.removeClass("is-disabled").html(c)}).fail(function(){i.removeClass("is-disabled").html(c)})});$(document).on("change","#cmn-toggle-4",function(){var a=false;$("#showLabel").html('&nbsp;<i class="fa fa-spin fa-spinner"></i>');if($(this).is(":checked")===true){$(".showWin").each(function(b){var c=$(this).attr("data-win");if(c==="1"){$(this).html('<i class="fa fa-check"></i>')}else{$(this).html('<i class="fa fa-remove"></i>')}})}else{$(".showWin").html("SPOILER")}$("#showLabel").html("&nbsp;Spoilers")});$(document).on("click","#submitSummoner",function(){var e=$(this);var c=$("#streamerId").val().trim();var b=$("#summoner").val();var a=$("#region").val();var d=$("#ajax-route-check-summoner").val();if(e.hasClass("is-disabled")){return false}if(b===""){openNoty("error","Please enter a Summoner");return false}if(c===""){openNoty("error","Please enter a Streamer (from List)");return false}e.addClass("is-disabled").html("Checking...");$.get(d,{streamerId:c,summoner:b,region:a}).done(function(f){openNoty(f.result,f.message);$("#streamerAC").val("").focus();$("#summoner").val("");e.removeClass("is-disabled").html("Check")}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident");e.removeClass("is-disabled").html("Check")})});$(document).on("click",".trigger-message-close",function(){var a=$(this).closest(".messageFly");if($(".messageFly").length<=1){cols.hideMessage();a.remove();history.pushState("",document.title,window.location.pathname)}else{a.animate({left:"9999px"},function(){a.remove()})}});$(document).on("click",".toggleTree",function(b){b.preventDefault();var c=$(this).next(".treeMenu");var a=$(this).children("i");if(c.is(":visible")){a.removeClass("fa-chevron-down").addClass("fa-chevron-right")}else{a.removeClass("fa-chevron-right").addClass("fa-chevron-down")}c.toggle(200)});function loadDetails(b,c){var a=$("#"+c);a.html('<i class="fa fa-spin fa-spinner fa-4x"></i>');$.get(b.attr("data-url")).done(function(d){a.html(d);initOverlays();initScrollbar(".subScroll");initTableVod("#tableVod");initTooltips(".tt");initMainStreamer(".show-main-streamers")})}function initScrollbar(a){if($(a).length){new PerfectScrollbar(a)}}function openNoty(a,b){new Noty({type:a,layout:"topRight",theme:"mint",text:b,timeout:5000,progressBar:true,closeWith:["click","button"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:false,force:false,killer:false,queue:"global",container:false,buttons:[],sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:false}).show()}function initOverlays(){cols.showOverlay=function(){$("body").addClass("show-main-overlay")};cols.hideOverlay=function(){$("body").removeClass("show-main-overlay")};cols.showMessage=function(){$("body").addClass("show-message");messageIsOpen=true};cols.hideMessage=function(){$("body").removeClass("show-message").removeClass("show-main-overlay");messageIsOpen=false};cols.showSidebar=function(){$("body").addClass("show-sidebar")};cols.hideSidebar=function(){$("body").removeClass("show-sidebar")};$(".trigger-toggle-sidebar").on("click",function(){cols.showSidebar();cols.showOverlay()});$("#main > .overlay").on("click",function(){cols.hideOverlay();cols.hideMessage();cols.hideSidebar()})}function detectHash(){var a=window.location.hash;if(!a.length){return false}$("[data-hash="+a.replace("#","")+"]").trigger("click")}function closeModal(){$(".trigger-message-close").trigger("click")}function initTableVod(a){$(a).DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:true,order:[[1,"desc"]]})}function initTooltips(a){if($(a).length){var b=250;if($(a).hasClass("ttLong")){b=800}$(a).tooltipster({animation:"fade",delay:200,debug:false,maxWidth:b,theme:["tooltipster-punk","tooltipster-ls"],contentAsHTML:true})}}function initMainStreamer(a){if($(a).length){$.post($(a).attr("data-url"),{c:$(a).attr("data-champion")}).done(function(b){$(a).html(b);initTooltips(".tt")})}};