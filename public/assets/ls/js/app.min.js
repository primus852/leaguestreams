var player;String.prototype.escapeHTML=function(){return this.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},$(document).ready(function(){$(".card-image").mouseover(function(){$(".card-modal").fadeIn(100).toggleClass("active")}).mouseout(function(){$(".card-modal").fadeOut(100).toggleClass("active")})});var cols={},messageIsOpen=!1;$(function(){introInit(),initScrollbar("#perfectScroll"),initScrollbar("#pScrollerMenu"),initScrollbar("#pScrollerMain"),initScrollbar("#lScroll"),$(window).hashchange(function(){""===location.hash.replace(/^#/,"")&&$(".trigger-message-close").trigger("click")});var e=$("#"+LS_NAV);e.is(":visible")||e.parent().prev("a").trigger("click"),e.addClass("active"),$("#modal-5").length&&modalInit();var a=$("#lScroll .lazy");a.length&&a.Lazy({appendScroll:$("#lScroll")});var t=$("select:not(.form-control)");t.length&&t.select2({width:"100%",allowClear:!0}),$("[data-step]").length?$(document).on("click","#hiw",function(e){introJs().setOption("showProgress",!0).start()}):$("#mTutorial").remove(),initOverlays(),detectHash();var s=$("#stats-table");s.length&&(s.DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:!0,order:[[2,"desc"]],columnDefs:[{orderData:[2],targets:[3]},{targets:[2],visible:!1,searchable:!1}]}),s.on("page.dt",function(){initTooltips(".tt")}),initTooltips(".tt"));var o=$("#champ-table");o.length&&o.DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:!0}),initTooltips(".tt")});var $isPlayer=$(".refreshInGamePlayer");if($isPlayer.length){setInterval(function(){checkRunesInGame($isPlayer,!1,!0)},1e4);var $playerWindow=$("#playerMain");$playerWindow.height($(window).height()-65);var $videoHeight=$playerWindow.height(),$videoWidth=$playerWindow.width(),options={width:$videoWidth,height:$videoHeight,channel:$("#streamer-channel").val(),playsinline:!0};player=$isPlayer.hasClass("twitch-embed")?new Twitch.Embed("playerMain",options):new Twitch.Player("playerMain",options),checkRunesInGame($isPlayer,!1,!0)}function checkRunesInGame(e,a,t){var s=e,o=$("#ajax-route-load-perks").val(),n=$(".r-foot-check"),i=$(".footNavUL");if(s.hasClass("disabled"))return!1;!0!==t&&s.hasClass("inGame")||(!0===a&&s.html('<i class="fa fa-spin fa-refresh"></i> Refreshing...').addClass("disabled").css("background","#2d2d2d"),$.post(o).done(function(e){i.html(e);var t=$(e).find("#ls-champion");t.length?(s.html('<i class="fa fa-info-circle"></i> Playing '+t.html()+" - Check Runes").removeClass("disabled").addClass("inGame").css("background","#82b84f"),initTooltips(".tt")):(s.html('<i class="fa fa-refresh"></i> Not in Game').removeClass("disabled").css("background","#a01c1a").removeClass("inGame"),n.is(":checked")&&$(".closeBar").trigger("click")),!n.is(":checked")&&!0===a&&s.hasClass("inGame")&&(n.trigger("click"),s.hide())}).fail(function(e,a){404===e.status||"404"===e.status?s.html("Offline").removeClass("disabled").css("background","#fcb941"):s.html("Error").removeClass("disabled").css("background","#a01c1a")}))}$(document).on("click",".refreshRunes",function(e){checkRunesInGame($isPlayer,!1,!0)}),$(document).on("click",".refreshInGamePlayer",function(e){e.preventDefault(),checkRunesInGame($(this),!0,!0)}),$(document).on("click",".toggle-chat",function(){var e=$(this);if(e.hasClass("clicked"))return!1;e.addClass("clicked").html('<i class="fa fa-spin fa-spinner"></i>')});var $isPlayerVod=$(".refreshInGamePlayerVod");function checkRunesInGameVod(e,a,t){var s=e,o=$("#ajax-route-load-perks-vod").val(),n=$(".r-foot-check"),i=$(".footNavUL"),r=s.attr("data-match");if(s.hasClass("disabled"))return!1;var l=$("#tFrame").contents().find("#video-playback").find(".player-seek__time");console.log(l),!0!==t&&s.hasClass("inGame")||(!0===a&&s.html('<i class="fa fa-spin fa-refresh"></i> Refreshing...').addClass("disabled").css("background","#2d2d2d"),$.get(o,{match:r}).done(function(e){i.html(e);var t=$(e).find("#ls-champion");t.length?(s.html('<i class="fa fa-info-circle"></i> Playing '+t.html()+" - Check Runes").removeClass("disabled").addClass("inGame").css("background","#82b84f"),initTooltips(".tt")):(s.html('<i class="fa fa-refresh"></i> Not in Game').removeClass("disabled").css("background","#a01c1a").removeClass("inGame"),n.is(":checked")&&$(".closeBar").trigger("click")),!n.is(":checked")&&!0===a&&s.hasClass("inGame")&&(n.trigger("click"),s.hide())}).fail(function(){s.html("Error").removeClass("disabled").css("background","#a01c1a")}))}function introInit(){var e=$(".cd-bg-video-wrapper");if(e.length&&"desktop"===window.getComputedStyle(document.querySelector(".cd-bg-video-wrapper"),"::after").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"")){var a=e.data("video"),t=$('<video loop><source src="'+a+'.mp4" type="video/mp4" /><source src="'+a+'.webm" type="video/webm" /></video>');t.appendTo(e),t.get(0).play()}}function modalInit(){[].slice.call($(".md-trigger")).forEach(function(e,a){var t=$("#"+e.getAttribute("data-modal"));e.addEventListener("click",function(e){t.addClass("md-show")})})}function addMasteries(e,a,t,s,o,n,i){var r=$("#masteries-"+s);"0"===a?r.append('<div class="mastery mRow'+o+" "+n+' mastery-none">\n    <div class="mContent tt" title="'+t+"<br /><span style='font-size:12px;'>"+i+'</span>">\n        <div class="icon iconsGrey icon-offset-'+e+' " data-name="'+t+'"></div>\n    </div>\n</div>'):r.append('<div class="mastery mRow'+o+" "+n+'">\n    <div class="mContent tt" title="'+t+"<br /><span style='font-size:12px;'>"+i+'</span>">\n        <div class="icon iconsActive icon-offset-'+e+' " data-name="'+t+'"></div>\n        <div class="rank">'+a+"</div>\n    </div>\n</div>")}$isPlayerVod.length&&checkRunesInGameVod($isPlayerVod,!0,!0),$(document).on("click",".refreshRunes",function(e){checkRunesInGameVod($isPlayerVod,!1,!0)}),$(document).on("click",".closeBar",function(e){$(".r-foot-check").trigger("click"),$isPlayer.length&&$isPlayer.show(),$isPlayerVod.length&&$isPlayerVod.show()}),$(document).on("click",".refreshInGamePlayerVod",function(e){e.preventDefault(),checkRunesInGameVod($(this),!0,!0)}),$(document).on("click",".md-trigger",function(){var e=$(this),a=null,t=null,s=null,o=null;e.hasClass("removeStreamer")&&(a=e.attr("data-streamer"),o=e.attr("data-channel"),$(".channelName").html(o),$("#streamerRemove").attr("data-streamer",a)),e.hasClass("removeSummoner")&&(t=e.attr("data-summoner"),s=e.attr("data-name"),a=e.attr("data-streamer"),$(".summonerName").html(s),$("#summonerRemove").attr("data-summoner",t).attr("data-streamer",a)),e.hasClass("reportStreamer")&&(a=e.attr("data-streamer"),o=e.attr("data-channel"),$(".channelName").html(o),$("#streamerReport").attr("data-streamer",a)),e.hasClass("reportSummoner")&&(t=e.attr("data-summoner"),s=e.attr("data-name"),a=e.attr("data-streamer"),$(".summonerName").html(s),$("#summonerReport").attr("data-summoner",t).attr("data-streamer",a))}),$(document).on("click",".md-close",function(e){$(this).parent().parent().parent().removeClass("md-show")}),$(document).on("click","#streamerRemove",function(e){var a=$(this),t=$("#ajax-route-delete-streamer").val(),s=a.attr("data-streamer");$.post(t,{streamer:s}).done(function(e){openNoty(e.result,e.message),"success"===e.result&&$("#sRow_"+s).remove()}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})}),$(document).on("click","#summonerRemove",function(e){var a=$(this),t=$("#ajax-route-delete-summoner").val(),s=a.attr("data-summoner");$.post(t,{summoner:s}).done(function(e){openNoty(e.result,e.message),"success"===e.result&&$("#sDiv_"+s).remove()}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})}),$(document).on("click","#streamerReport",function(e){var a=$(this),t=$("#ajax-route-report-streamer").val(),s=a.attr("data-streamer"),o=$("#reportDetails").val();if(!o.length)return openNoty("warning","Please give a reason for the report."),!1;$.post(t,{streamer:s,reason:o}).done(function(e){openNoty(e.result,e.message)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})}),$(document).on("click","#summonerReport",function(e){var a=$(this),t=$("#ajax-route-report-summoner").val(),s=a.attr("data-summoner"),o=$("#reportDetails").val();if(!o.length)return openNoty("warning","Please give a reason for the report."),!1;$.post(t,{summoner:s,reason:o}).done(function(e){openNoty(e.result,e.message)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident")})}),$(document).on("mouseenter",".refreshStreamer",function(){$(this).addClass("fa-spin")}),$(document).on("mouseleave",".refreshStreamer",function(){$(this).removeClass("fa-spin")}),$(document).on("click",".refreshStreamer",function(e){var a=$(this),t=a.attr("data-summoners"),s=a.attr("data-streamer"),o=$("#logo").attr("src"),n=$("#sRow_"+s),i=$("#sPanel_"+s),r=$("#ajax-route-update-streamer-single").val(),l=a.attr("data-streamer-container"),c=t.split(","),d=0,m="",h=[];$.each(c,function(e,a){var t=a.split("___"),s=t[0],o=t[1];m=m+'<span id="s_'+o+'" class="text-white">'+s+': <i class="fa fa-spin fa-spinner"></i></span> | ';var u=$.post(r,{id:o}).done(function(e){return"remove"===e.extra.action?(openNoty(e.result,e.message),n.remove(),$.each(h,function(e,a){a.abort()}),!1):"found"===e.extra.action?($.each(h,function(e,a){a.abort()}),$.post(l,{id:o}).done(function(e){n.replaceWith(e),initTooltips(".tt"),i.unblock()}).fail(function(){i.unblock()}),!1):(d++,$("#s_"+o).removeClass("text-white").addClass("text-"+e.extra.iClass).html(s+': <i class="fa fa-'+e.extra.icon+'"></i>'),void(d===c.length&&$.post(l,{id:o}).done(function(e){n.replaceWith(e),initTooltips(".tt"),i.unblock()}).fail(function(){i.unblock()})))}).fail(function(){i.unblock()});h.push(u)}),i.block({message:'   <div class="row">       <div class="col col-12">           <div class="row">               <div class="col col-4 text-right">                   <img src="'+o+'" style="max-height:85px;">               </div>               <div class="col col-8 text-left">                   <h1 style="margin-top:25px;"><i class="fa fa-spin fa-spinner"></i> Updating Streamer</h1>               </div>           </div>       </div>   </div>   <br />   <div class="row">       <div class="col col-12">'+m+"       </div>   </div> ",css:{backgroundColor:"transparent",color:"#fff",border:"none",width:"100%"},width:"100%"})}),$(document).on("click",".clickable",function(e){e.preventDefault(),window.location.hash=$(this).attr("data-hash");var a=Math.floor(1e4*Math.random()+1);$("body").append('<div class="messageFly" id="'+a+'"></div>'),$("#"+a).show(),loadDetails($(this),a),messageIsOpen?($(this).hasClass("innerMessage")||cols.hideMessage(),setTimeout(function(){cols.showMessage()},300)):cols.showMessage(),cols.showOverlay()}),$("#main .clickableLegacy").on("click",function(e){var a=$(this);$(e.target).is("label")?a.toggleClass("selected"):messageIsOpen&&a.is(".active")?(cols.hideMessage(),cols.hideOverlay()):(messageIsOpen?(cols.hideMessage(),a.addClass("active"),setTimeout(function(){cols.showMessage()},300)):(a.addClass("active"),cols.showMessage()),cols.showOverlay())}),$("#main > .overlay").on("click",function(){cols.hideOverlay(),cols.hideMessage(),cols.hideSidebar()}),$(".search-box input").on("focus",function(){$(window).width()<=1360&&cols.hideMessage()}),$("#preloader").fadeOut("slow",function(){$(this).remove()}),$(document).on("click",".manageSmurf",function(e){var a=$(this),t=a.attr("data-type"),s=a.attr("data-smurf"),o=a.attr("data-streamer"),n=a.attr("data-region"),i=$("#ajax-route-manage-smurf").val(),r=a.html();if(a.hasClass("is-disabled"))return!1;a.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),$.get(i,{type:t,smurf:s,streamer:o,region:n}).done(function(e){openNoty(e.result,e.message),"success"===e.result&&$("#row_"+o).remove()}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident"),a.removeClass("is-disabled").html(r)})}),$(document).on("click","#submitStreamer",function(e){var a=$(this),t=$("#channel").val().trim(),s=$("#platform").val(),o=$("#ajax-route-check-streamer").val();return!a.hasClass("is-disabled")&&(""===t?(openNoty("error","Please enter a Channel-Name"),!1):(a.addClass("is-disabled").html("Checking..."),void $.post(o,{platform:s,channel:t}).done(function(e){openNoty(e.result,e.message),$("#channel").val("").focus(),a.removeClass("is-disabled").html("Check")}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident"),a.removeClass("is-disabled").html("Check")})))});var $streamerAc=$("#streamerAC");if($streamerAc.length){var $urlAuto=$("#ajax-route-find-streamer-ac").val();$streamerAc.autocomplete({valueKey:"title",source:[{url:$urlAuto+"/%QUERY%",type:"remote"}],visibleLimit:10,autoselect:!0,minLength:2}).on("selected.xdsoft",function(e,a){$("#streamerId").val(a.id),$("#streamerAC").trigger("keyup"),$("#js-summoner-db-status").show()}).keyup(function(e){}).focus()}function trigger_summoner(){var e=$("#summoner"),a=$("#region option:selected"),t=$("#js-add-summoner-name");""===$.trim(e.val())?t.html(""):t.html(a.text()+"-"+e.val())}function trigger_streamer(){var e=$("#streamerAC"),a=$("#platform option:selected"),t=$("#js-add-streamer-name");$("#js-summoner-db-status").hide(),""===$.trim(e.val())?t.html(""):t.html(a.text()+" - "+e.val())}function loadDetails(e,a){var t=$("#"+a);t.html('<i class="fa fa-spin fa-spinner fa-4x"></i>'),$.get(e.attr("data-url")).done(function(e){t.html(e),initOverlays(),initScrollbar(".subScroll"),initTableVod("#tableVod"),initTooltips(".tt"),initMainStreamer(".show-main-streamers")})}function initScrollbar(e){$(e).length&&new PerfectScrollbar(e)}function openNoty(e,a){new Noty({type:e,layout:"topRight",theme:"mint",text:a,timeout:5e3,progressBar:!0,closeWith:["click","button"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1}).show()}function initOverlays(){cols.showOverlay=function(){$("body").addClass("show-main-overlay")},cols.hideOverlay=function(){$("body").removeClass("show-main-overlay")},cols.showMessage=function(){$("body").addClass("show-message"),messageIsOpen=!0},cols.hideMessage=function(){$("body").removeClass("show-message").removeClass("show-main-overlay"),messageIsOpen=!1},cols.showSidebar=function(){$("body").addClass("show-sidebar")},cols.hideSidebar=function(){$("body").removeClass("show-sidebar")},$(".trigger-toggle-sidebar").on("click",function(){cols.showSidebar(),cols.showOverlay()}),$("#main > .overlay").on("click",function(){cols.hideOverlay(),cols.hideMessage(),cols.hideSidebar()})}function detectHash(){var e=window.location.hash;if(!e.length)return!1;$("[data-hash="+e.replace("#","")+"]").trigger("click")}function closeModal(){$(".trigger-message-close").trigger("click")}function initTableVod(e){$(e).DataTable({dom:'<"top"f>rt<"bottom"ip>',responsive:!0,order:[[1,"desc"]]})}function initTooltips(e){if($(e).length){var a=250;$(e).hasClass("ttLong")&&(a=800),$(e).tooltipster({animation:"fade",delay:200,debug:!1,maxWidth:a,theme:["tooltipster-punk","tooltipster-ls"],contentAsHTML:!0})}}function initMainStreamer(e){$(e).length&&$.post($(e).attr("data-url"),{c:$(e).attr("data-champion")}).done(function(a){$(e).html(a),initTooltips(".tt")})}function initMainRoleStreamer(e){$(e).length&&$.post($(e).attr("data-url"),{role:$(e).attr("data-role")}).done(function(a){$(e).html(a),initTooltips(".tt")})}$(document).on("click",".clickRole",function(){var e=$(this),a=e.attr("data-role-id"),t=$("#ajax-route-load-vods-role").val();return $("#role_"+a).is(":visible")?($("#role_"+a).slideToggle(),!1):e.hasClass("is-diabled")?(openNoty("warning","Loading VODs already"),!1):($(".vodToggle").hide(),$("#role_"+a).slideToggle("slow").html('&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-spin fa-spinner"></i>'),e.addClass("is-disabled"),void $.get(t,{role:a}).done(function(t){e.removeClass("is-disabled"),$("#role_"+a).html('<table class="table table-condensed" id="tbl_'+a+'">\n    <thead>\n    <th class="text-center"><i class="fa fa-comment-o"></i></th>\n    <th class="text-center"><i class="fa fa-calendar-o"></i></th>\n    <th class="text-center"><i class="fa fa-video-camera"></i></th>\n    <th class="text-center"><i class="fa fa-trophy"></i></th>\n    <th class="text-center"><i class="fa fa-location-arrow"></i></th>\n    <th class="text-center"><i class="fa fa-flash"></i> </th>\n    <th class="text-center"><i class="fa fa-eye"></i></th>\n    </thead>\n    <tbody>\n    </tbody>\n</table> '),$.each(t.vods.videos,function(e,t){var s="";null!==t.enemyChampion&&(s="vs. "+t.enemyChampion),$("#tbl_"+a+" > tbody").append('<tr>\n    <td><img src="/assets/vendor/ls/img/flags/'+t.lang+'.png" /></td>\n    <td>'+t.gameStart+"</td>\n    <td>"+t.channelUser+"</td>\n    <td>"+t.league+"</td>\n    <td>"+t.champion+"</td>\n    <td>"+s+'</td>\n    <td><a href="'+t.internalLink+'">WATCH</a></td>\n</tr>')}),initScrollbar("#role_"+a)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident"),e.removeClass("is-disabled")}))}),$(document).on("click",".clickChampion",function(){var e=$(this),a=e.attr("data-champ-id"),t=$("#ajax-route-load-vods").val(),s=$("#champ_"+a);return s.is(":visible")?(s.slideToggle(),!1):e.hasClass("is-diabled")?(openNoty("warning","Loading VODs already"),!1):($(".vodToggle").hide(),s.slideToggle("slow").html('&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-spin fa-spinner"></i>'),e.addClass("is-disabled"),void $.get(t,{c:a}).done(function(e){s.html(e),$("#tableChampion").DataTable({responsive:!0,dom:""}),$(".tt").tooltipster({animation:"fade",delay:200,theme:["tooltipster-punk","tooltipster-ls"],contentAsHTML:!0})}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident"),e.removeClass("is-disabled")}))}),$(document).on("click",".clickChampionStreamer",function(){var e=$(this),a=e.attr("data-champion");return $("#champ_"+a).is(":visible")?($("#champ_"+a).slideToggle(),!1):e.hasClass("is-diabled")?(openNoty("warning","Loading Streamers already"),!1):($("#champ_"+a).slideToggle("slow").html('<h4><i class="fa fa-spin fa-spinner"></i> Loading Streamers</h4>\n<div class="row" style="border-bottom:1px solid #ccc;padding-top:5px;">\n    <div class="col-12">\n        This may take a while...\n    </div>\n</div>'),e.addClass("is-disabled"),void initMainStreamer("#champ_"+a))}),$(document).on("click",".clickRoleStreamer",function(){var e=$(this),a=e.attr("data-role");return $("#role_"+a).is(":visible")?($("#role_"+a).slideToggle(),!1):e.hasClass("is-diabled")?(openNoty("warning","Loading Streamers already"),!1):($("#role_"+a).slideToggle("slow").html('<h4><i class="fa fa-spin fa-spinner"></i> Loading Streamers</h4>\n<div class="row" style="border-bottom:1px solid #ccc;padding-top:5px;">\n    <div class="col-12">\n        This may take a while...\n    </div>\n</div>'),e.addClass("is-disabled"),void initMainRoleStreamer("#role_"+a))}),$(document).on("keyup","#searchChamp",function(){var e=$(this).val().toLowerCase();""!==e?($(".champRow").hide(),$('[data-champ*="'+e+'"]').show(),$('[data-streamer*="'+e+'"]').show(),$('[data-summoner*="'+e+'"]').show()):$(".champRow").show()}),$(document).on("keyup","#searchVod",function(){var e=$(this).val().toLowerCase();""!==e?($(".vodCard").hide(),$('[data-champ*="'+e+'"]').show(),$('[data-role*="'+e+'"]').show()):$(".vodCard").show()}),$(document).on("click",".showWin",function(){var e=$(this);"1"===e.attr("data-win")?e.html('<i class="fa fa-check"></i>'):e.html('<i class="fa fa-remove"></i>')}),$(document).on("click","#wishVod",function(e){e.preventDefault();var a=$(this),t=$("#ajax-route-load-vods-wish").val(),s=a.html();if(a.hasClass("is-disabled"))return!1;a.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i> Loading');var o=$("#wChampion"),n=$("#wRole"),i=$("#wStreamer"),r=$("#wEnemy"),l=$("#vodRow");if(!(o.val().length||n.val().length||i.val().length||r.val().length))return a.removeClass("is-disabled").html(s),openNoty("error","Please select at least one criteria"),!1;l.html('<i class="fa fa-spin fa-spinner"></i>'),$.get(t,{champions:o.val(),roles:n.val(),streamers:i.val(),enemies:r.val()}).done(function(e){l.html(e),a.removeClass("is-disabled").html(s)}).fail(function(){a.removeClass("is-disabled").html(s)})}),$(document).on("change","#cmn-toggle-4",function(){$("#showLabel").html('&nbsp;<i class="fa fa-spin fa-spinner"></i>'),!0===$(this).is(":checked")?$(".showWin").each(function(e){"1"===$(this).attr("data-win")?$(this).html('<i class="fa fa-check"></i>'):$(this).html('<i class="fa fa-remove"></i>')}):$(".showWin").html("SPOILER"),$("#showLabel").html("&nbsp;Spoilers")}),$(document).on("keyup","#summoner",function(e){e.preventDefault(),trigger_summoner()}),$(document).on("change","#region",function(e){e.preventDefault(),trigger_summoner()}),$(document).on("keyup","#streamerAC",function(e){e.preventDefault(),trigger_streamer()}),$(document).on("change","#platform",function(e){e.preventDefault(),trigger_streamer()}),$(document).on("click","#submitSummoner",function(e){var a=$(this),t=$.trim($("#streamerAC").val()),s=$("#summoner").val(),o=$("#region").val(),n=$("#platform").val(),i=$("#region option:selected").text(),r=$("#ajax-route-check-summoner").val(),l=$(".progress"),c=$(".progress-bar");if(a.hasClass("is-disabled"))return!1;if(""===s)return openNoty("error","Please enter a Summoner"),!1;if(""===t)return openNoty("error","Please enter a Streamer (from List)"),!1;a.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i> Checking...'),l.length&&c.html("Searching "+i).css("width","0%").attr("aria-valuenow","0").show();var d,m=!1,h=0,u=function(){$.get($("#ajax-route-check-session").val(),{streamerId:t,summoner:s,region:o,platform:n}).done(function(e){0===h&&$.get(r,{streamerId:t,summoner:s,region:o,platform:n}).done(function(e){openNoty(e.result,e.message),$("#streamerAC").val("").focus(),$("#summoner").val(""),a.removeClass("is-disabled").html("Check"),l.length&&(c.html("").css("width","0%").attr("aria-valuenow",0),l.hide()),d&&(clearTimeout(d),m=!0)}).fail(function(){d&&(m=!0,clearTimeout(d)),openNoty("error","Ajax failed. The administrator was informed about the incident"),a.removeClass("is-disabled").html("Check"),l.length&&(c.html("").css("width","0%").attr("aria-valuenow",0),l.hide())}),h++,l.length&&(l.show(),e.extra.pct>0?c.html(e.extra.status).css("width",e.extra.pct+"%").attr("aria-valuenow",e.extra.pct):c.html("Searching...").css("width","15%").attr("aria-valuenow",15))}).always(function(){!1===m?d=setTimeout(u,1e3):l.length&&(l.hide(),c.html("").css("width","0%").attr("aria-valuenow",0))})};u()}),$(document).on("click","#submitSmurf",function(e){var a=$(this),t=a.attr("data-streamer"),s=$("#summoner").val(),o=$("#region").val(),n=($("#region option:selected").text(),a.attr("data-url")),i=a.html();return!a.hasClass("is-disabled")&&(""===s?(openNoty("error","Please enter a Summoner"),!1):(a.addClass("is-disabled").html('<i class="fa fa-spin fa-spinner"></i>'),void $.get(n,{streamerId:t,summoner:s,region:o}).done(function(e){openNoty(e.result,e.message),"success"===e.result&&$("#summoner").val("").focus(),a.removeClass("is-disabled").html(i)}).fail(function(){openNoty("error","Ajax failed. The administrator was informed about the incident"),a.removeClass("is-disabled").html(i)})))}),$(document).on("click",".trigger-message-close",function(){var e=$(this).closest(".messageFly");$(".messageFly").length<=1?(cols.hideMessage(),e.remove(),history.pushState("",document.title,window.location.pathname)):e.animate({left:"9999px"},function(){e.remove()})}),$(document).on("click",".toggleTree",function(e){e.preventDefault();var a=$(this).next(".treeMenu"),t=$(this).children("i");a.is(":visible")?t.removeClass("fa-chevron-down").addClass("fa-chevron-right"):t.removeClass("fa-chevron-right").addClass("fa-chevron-down"),a.toggle(200)});